const fs=require("fs"),path=require("path"),esbuild=require("esbuild"),INPUT_DIR=".",OUTPUT_DIR="dist",EXTENSIONS=[".js",".css",".html"];fs.existsSync(OUTPUT_DIR)&&fs.rmSync(OUTPUT_DIR,{recursive:!0,force:!0}),fs.mkdirSync(OUTPUT_DIR,{recursive:!0});function traverse(i,r){const c=fs.readdirSync(i,{withFileTypes:!0});for(const s of c){const e=path.join(i,s.name),n=path.join(r,s.name);if(!e.includes(OUTPUT_DIR))if(s.isDirectory())fs.mkdirSync(n,{recursive:!0}),traverse(e,n);else{const o=path.extname(s.name).toLowerCase();EXTENSIONS.includes(o)?minifyFile(e,n,o):fs.copyFileSync(e,n)}}}function minifyFile(i,r,c){const s=fs.readFileSync(i,"utf8");try{if(c===".js"){const e=esbuild.transformSync(s,{minify:!0,loader:"js"});fs.writeFileSync(r,e.code,"utf8")}else if(c===".css"){const e=esbuild.transformSync(s,{minify:!0,loader:"css"});fs.writeFileSync(r,e.code,"utf8")}else if(c===".html"){const e=s.replace(/\n/g,"").replace(/\s+/g," ").replace(/>\s+</g,"><").replace(/<!--.*?-->/g,"");fs.writeFileSync(r,e,"utf8")}console.log(`Minificado: ${i}`)}catch(e){console.error(`Erro ao minificar ${i}:`,e)}}traverse(INPUT_DIR,OUTPUT_DIR),console.log("Minifica\xE7\xE3o completa! Todos os arquivos est\xE3o em ./dist");
