const fs=require("fs"),path=require("path"),esbuild=require("esbuild"),INPUT_DIR=".",OUTPUT_DIR="dist",EXTENSIONS=[".js",".css",".html"];fs.existsSync(OUTPUT_DIR)&&fs.rmSync(OUTPUT_DIR,{recursive:!0,force:!0}),fs.mkdirSync(OUTPUT_DIR,{recursive:!0});function traverse(c,i){const n=fs.readdirSync(c,{withFileTypes:!0});for(const s of n){const e=path.join(c,s.name),r=path.join(i,s.name);if(!e.includes(OUTPUT_DIR))if(s.isDirectory())fs.mkdirSync(r,{recursive:!0}),traverse(e,r);else{const o=path.extname(s.name).toLowerCase();EXTENSIONS.includes(o)?minifyFile(e,r,o):fs.copyFileSync(e,r)}}}function minifyFile(c,i,n){const s=fs.readFileSync(c,"utf8");if(n===".js"){const e=esbuild.transformSync(s,{minify:!0,loader:"js"});fs.writeFileSync(i,e.code,"utf8")}else if(n===".css"){const e=esbuild.transformSync(s,{minify:!0,loader:"css"});fs.writeFileSync(i,e.code,"utf8")}else if(n===".html"){const e=s.replace(/\n/g,"").replace(/\s+/g," ").replace(/>\s+</g,"><").replace(/<!--.*?-->/g,"");fs.writeFileSync(i,e,"utf8")}console.log(`Minificado: ${c} -> ${i}`)}traverse(INPUT_DIR,OUTPUT_DIR),console.log("Minifica\xE7\xE3o completa! Todos os arquivos est\xE3o em ./dist");
