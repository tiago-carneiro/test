import {PAGES as a,DEFAULT_PAGE as b,NOT_FOUND_PAGE as c,} from'./pages.config.js';const{keys:d}=Object;let A=document.currentScript?.src||location.href,g=f.pathname.substring(0,f.pathname.lastIndexOf('/')+1),i={page:null,style:null,scroll:0};let f=new URL(A, location.href);!location.hash.startsWith('#/')?location.hash=`#/${b}`:location.hash=location.hash.replace(/^#\/+/,'#/');let h={};async function j(){let _=document.getElementById('app'),C=B.slice(1).split('/').filter(Boolean),D=C[0]||b,E=a[D]?D:c;if(!_)return;(i.page&&h[i.page])&&(h[i.page].scroll=window.scrollY);let B=location.hash||`#/${b}`;await l(E,!1,C[1]);window.scrollTo(0,h[E]?.scroll||0)}export{j as router};function k(_a=[]){for(const p of _a)(a[p]&&!h[p])&&l(p,!0)}export{k as preloadPages};async function l(_A,_b=!1,_c=null){let _d=document.getElementById('app');(!_b&&i.page&&h[i.page]?.js?.onDestroy)&&h[i.page].js.onDestroy();if(h[_A]){if(!_b){_d.innerHTML=h[_A].html;i.style&&(i.style.disabled=!0);!document.head.contains(h[_A].style)&&document.head.appendChild(h[_A].style);h[_A].style.disabled=!1;i.style=h[_A].style;h[_A].js.onInit?.(_c,!0);i.page=_A}return}let _e=`${window.location.origin}${g}pages/${a[_A].component}`;try{let aA=await fetch(`${_e}/app.component.html`).then(r=>{if(!r.ok)throw Error(`Erro ao carregar HTML: ${r.status}`);return r.text()});let _B=document.createElement('style');_B.textContent=await fetch(`${_e}/app.component.css`).then(r=>{if(!r.ok)throw Error(`Erro ao carregar CSS: ${r.status}`);return r.text()});_B.disabled=!0;let _C=await import(`${_e}/app.component.js`);h[_A]={html:aA,style:_B,js:_C,scroll:0};if(_b)return;_d.innerHTML=aA;i.style&&(i.style.disabled=!0);!document.head.contains(_B)&&document.head.appendChild(_B);_B.disabled=!1;i.style=_B;_C.onInit?.(_c,!1);i.page=_A}catch(aB){console.error('Erro ao carregar pÃ¡gina:',aB);_A!==c&&await l(c,!1)}}document.body.addEventListener('click',e=>{let aC=e.target.closest('[data-link]');if(!aC)return;e.preventDefault();let aD=aC.getAttribute('href').replace(/^#+/,'');location.hash='#/'+aD.replace(/^\/+/,'')});window.addEventListener('hashchange',j);k(d(a));!location.hash?location.hash=`#/${b}`:location.hash=location.hash.replace(/^#\/+/,'#/');window.addEventListener('DOMContentLoaded',()=>j());